<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O Segredo da Estalagem do Cervo Negro - Enigma Hunter</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
</head>
<body>
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>Carregando o mist√©rio...</p>
        </div>
    </div>

    <div id="main-menu" class="main-menu">
        <div class="title-container">
            <h1 class="game-title">O SEGREDO DA</h1>
            <h2 class="game-subtitle">ESTALAGEM DO CERVO NEGRO</h2>
            <p class="game-tagline">Um mist√©rio interativo com IA</p>
        </div>

        <div class="menu-container">
            <button id="btn-new-game" class="menu-btn">
                <span class="btn-icon">‚öîÔ∏è</span>
                Novo Jogo
            </button>
            <button id="btn-load-game" class="menu-btn">
                <span class="btn-icon">üìú</span>
                Carregar Jogo
            </button>
            <button id="btn-instructions" class="menu-btn">
                <span class="btn-icon">üìñ</span>
                Instru√ß√µes
            </button>
        </div>
    </div>

    <div id="player-id-screen" class="modal-screen hidden">
        <div class="modal-content">
            <h2>Novo Jogo</h2>
            <p>Escolha um identificador √∫nico para seu investigador.</p>
            <input type="text" id="player-id-input" placeholder="Digite seu ID ou deixe em branco para gerar automaticamente" maxlength="20">
            <div class="modal-buttons">
                <button id="btn-start-game" class="primary-btn">Come√ßar Investiga√ß√£o</button>
                <button id="btn-cancel-new-game" class="secondary-btn">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="load-game-screen" class="modal-screen hidden">
        <div class="modal-content wide">
            <h2>Carregar Jogo</h2>
            <div id="saved-games-list" class="saved-games-list">
                <p class="no-saves">Nenhum jogo salvo encontrado.</p>
            </div>
            <div class="modal-buttons">
                <button id="btn-cancel-load" class="secondary-btn">Voltar</button>
            </div>
        </div>
    </div>

    <div id="instructions-screen" class="modal-screen hidden">
        <div class="modal-content">
            <h2>Instru√ß√µes</h2>
            <div class="instructions-content">
                <h3>Como Jogar</h3>
                <p><strong>Enigma Hunter</strong> √© um jogo de investiga√ß√£o e mist√©rio baseado em texto. Voc√™ √© um investigador chamado para resolver um assassinato misterioso na hist√≥rica Estalagem do Cervo Negro.</p>

                <h3>Objetivos</h3>
                <ul>
                    <li>Explore diferentes √°reas da estalagem e da cidade</li>
                    <li>Examine objetos e colete evid√™ncias</li>
                    <li>Interrogue personagens suspeitos</li>
                    <li>Descubra pistas para desvendar o mist√©rio</li>
                    <li>Desenvolva suas habilidades de investiga√ß√£o</li>
                    <li>Fa√ßa a acusa√ß√£o correta quando tiver evid√™ncias suficientes</li>
                </ul>

                <h3>Sistema de Habilidades</h3>
                <p>Suas a√ß√µes desenvolvem 5 habilidades especializadas:</p>
                <ul>
                    <li><strong>An√°lise de Evid√™ncias:</strong> Examinar objetos f√≠sicos</li>
                    <li><strong>Conhecimento Hist√≥rico:</strong> Compreender contexto e hist√≥ria</li>
                    <li><strong>Interpreta√ß√£o de Comportamento:</strong> Ler pessoas e inten√ß√µes</li>
                    <li><strong>Descoberta Ambiental:</strong> Explorar ambientes</li>
                    <li><strong>Conex√£o de Informa√ß√µes:</strong> Relacionar pistas</li>
                </ul>

                <h3>Dicas</h3>
                <ul>
                    <li>Explore completamente cada √°rea antes de seguir em frente</li>
                    <li>Converse com todos os personagens v√°rias vezes</li>
                    <li>Palavras-chave espec√≠ficas podem desbloquear informa√ß√µes especiais</li>
                    <li>Colete evid√™ncias antes de confrontar suspeitos</li>
                    <li>Revise suas pistas regularmente</li>
                </ul>
            </div>
            <div class="modal-buttons">
                <button id="btn-close-instructions" class="primary-btn">Entendi</button>
            </div>
        </div>
    </div>

    <div id="game-screen" class="game-screen hidden">
        <div class="game-header">
            <div class="header-left">
                <h3 id="current-location-name" class="location-name"></h3>
                <p id="current-area-name" class="area-name"></p>
            </div>
            <div class="header-right">
                <button id="btn-menu" class="icon-btn" title="Menu">‚ò∞</button>
            </div>
        </div>

        <div class="game-content">
            <div class="main-panel">
                <div id="narrative-text" class="narrative-text"></div>

                <div id="options-container" class="options-container"></div>

                <div id="conversation-panel" class="conversation-panel hidden">
                    <div id="conversation-history" class="conversation-history"></div>
                    <div class="conversation-input-container">
                        <input type="text" id="conversation-input" placeholder="Digite sua pergunta...">
                        <button id="btn-send-message" class="send-btn">Enviar</button>
                        <button id="btn-end-conversation" class="secondary-btn">Encerrar Conversa</button>
                    </div>
                </div>
            </div>

            <div class="side-panel">
                <div class="panel-section">
                    <button class="panel-btn" id="btn-inventory">
                        <span class="panel-icon">üéí</span>
                        <span class="panel-label">Invent√°rio</span>
                        <span id="inventory-count" class="badge">0</span>
                    </button>
                </div>

                <div class="panel-section">
                    <button class="panel-btn" id="btn-clues">
                        <span class="panel-icon">üîç</span>
                        <span class="panel-label">Pistas</span>
                        <span id="clues-count" class="badge">0</span>
                    </button>
                </div>

                <div class="panel-section">
                    <button class="panel-btn" id="btn-skills">
                        <span class="panel-icon">‚ö°</span>
                        <span class="panel-label">Habilidades</span>
                    </button>
                </div>

                <div class="panel-section">
                    <button class="panel-btn" id="btn-save">
                        <span class="panel-icon">üíæ</span>
                        <span class="panel-label">Salvar</span>
                    </button>
                </div>

                <div class="panel-section">
                    <button class="panel-btn accusation-btn" id="btn-accuse">
                        <span class="panel-icon">‚öñÔ∏è</span>
                        <span class="panel-label">Fazer Acusa√ß√£o</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="inventory-modal" class="modal-screen hidden">
        <div class="modal-content">
            <h2>Invent√°rio</h2>
            <div id="inventory-list" class="item-list"></div>
            <div class="modal-buttons">
                <button id="btn-close-inventory" class="secondary-btn">Fechar</button>
            </div>
        </div>
    </div>

    <div id="clues-modal" class="modal-screen hidden">
        <div class="modal-content">
            <h2>Pistas Descobertas</h2>
            <div id="clues-list" class="item-list"></div>
            <div class="modal-buttons">
                <button id="btn-close-clues" class="secondary-btn">Fechar</button>
            </div>
        </div>
    </div>

    <div id="skills-modal" class="modal-screen hidden">
        <div class="modal-content">
            <h2>Habilidades do Investigador</h2>
            <div id="skills-list" class="skills-list"></div>
            <div class="modal-buttons">
                <button id="btn-close-skills" class="secondary-btn">Fechar</button>
            </div>
        </div>
    </div>

    <div id="accusation-modal" class="modal-screen hidden">
        <div class="modal-content">
            <h2>Fazer Acusa√ß√£o</h2>
            <div id="accusation-content" class="accusation-content">
                <p class="warning-text">Esta √© sua chance de resolver o mist√©rio. Escolha com cuidado!</p>

                <div class="form-group">
                    <label for="suspect-select">Quem voc√™ acusa?</label>
                    <select id="suspect-select">
                        <option value="">Selecione um suspeito...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="motive-input">Qual foi o motivo?</label>
                    <textarea id="motive-input" rows="3" placeholder="Descreva o motivo do crime..."></textarea>
                </div>

                <div class="form-group">
                    <label for="method-input">Qual foi o m√©todo utilizado?</label>
                    <textarea id="method-input" rows="3" placeholder="Descreva como o crime foi cometido..."></textarea>
                </div>

                <p id="evidence-warning" class="evidence-warning hidden">
                    Voc√™ precisa de pelo menos <span id="min-evidence">5</span> evid√™ncias-chave para fazer uma acusa√ß√£o.
                </p>
            </div>
            <div class="modal-buttons">
                <button id="btn-submit-accusation" class="primary-btn">Fazer Acusa√ß√£o</button>
                <button id="btn-cancel-accusation" class="secondary-btn">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="result-modal" class="modal-screen hidden">
        <div class="modal-content">
            <h2 id="result-title">Resultado</h2>
            <div id="result-content" class="result-content"></div>
            <div class="modal-buttons">
                <button id="btn-close-result" class="primary-btn">Continuar</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-functions-compat.js"></script>

    <!-- Game Scripts -->
    <script src="firebase-config.js"></script>
    <script src="game-engine.js"></script>
    <script src="game.js"></script>
</body>
</html>
